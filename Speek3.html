<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Распознавание голоса и чтение текста</title>
  <style type="text/css"></style>
	<link rel="stylesheet" type="text/css" href="Speek2.css">
</head>
<body>

  <textarea id="textarea" rows=10 cols=80></textarea>
  <button id="button" onclick="toggleStartStop()"></button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script type="text/javascript">
    var recognizing;
    var recognition = new webkitSpeechRecognition();
    recognition.continuous = true;
    reset();
    recognition.onend = reset;
    recognition.onresult = function (event) {
      for (var i = event.resultIndex; i < event.results.length; ++i) {
        if (event.results[i].isFinal) {
          //textarea.value += event.results[i][0].transcript;
          var names = event.results[i][0].transcript;
        }

        var arr = names.split(' ');

        for (var i = 0; i < arr.length; i++) {

          if (arr[i] == "Антон" && arr[i+1] == "Антон"){
            alert( 'Вам сообщение ' + arr[i] );
            arr[i+1] = null;
            textarea.value = arr[i];
          }
          else{
            textarea.value = arr[i] + " ";
          }
          

        }

      }
    }

    function reset() {
      recognizing = false;
      button.innerHTML = "Click to Speak";
    }

    function toggleStartStop() {
      if (recognizing) {
        recognition.stop();
        reset();
        textarea.value += ' ';
      } else {
        recognition.start();
        recognizing = true;
        button.innerHTML = "Click to Stop";
      }
    }
  </script>
            



</body>
</html>